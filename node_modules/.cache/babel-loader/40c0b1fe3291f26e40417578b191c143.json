{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { nasaAPIDateFormat, addDaysToDate, checkDateIsAfterThresholdDate } from \"../utils/dateUtils\";\nconst requestParams = {\n  url: `https://api.nasa.gov/planetary/apod?api_key=${process.env.REACT_APP_NASA_API_KEY}&start_date=${nasaAPIDateFormat(selectedDate)}&end_date=${dateFonasaAPIDateFormatmat(new Date())}`,\n  method: \"GET\"\n};\n\nconst useBatchedNasaImageQuery = (startDate, currBatch, batchSize) => {\n  _s();\n\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    setData([]);\n  }, [startDate]);\n  let endDate = addDaysToDate(startDate, batchSize);\n  let todaysDate = new Date();\n\n  if (checkDateIsAfterThresholdDate(endDate, todaysDate)) {\n    endDate = todaysDate;\n  }\n\n  endDate = nasaAPIDateFormat(endDate);\n  useEffect(() => {\n    axios({\n      method,\n      url,\n      data,\n      headers\n    }).then(response => {\n      if (response.data && Array.isArray(response.data)) {\n        setData(data.concat(response.data));\n      } else if (response.data) {\n        setData(data.concat([response.data]));\n      }\n    }).catch(error => {\n      setError(error);\n    });\n  });\n  return [data, error];\n};\n\n_s(useBatchedNasaImageQuery, \"1jY+6X/qyDb1CpbaVnLw920c/58=\");\n\nexport default useBatchedNasaImageQuery;","map":{"version":3,"sources":["/Users/alexma/Desktop/spacetagram/src/hooks/useBatchedNasaImageQuery.js"],"names":["useEffect","useState","axios","nasaAPIDateFormat","addDaysToDate","checkDateIsAfterThresholdDate","requestParams","url","process","env","REACT_APP_NASA_API_KEY","selectedDate","dateFonasaAPIDateFormatmat","Date","method","useBatchedNasaImageQuery","startDate","currBatch","batchSize","data","setData","error","setError","endDate","todaysDate","headers","then","response","Array","isArray","concat","catch"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACEC,iBADF,EAEEC,aAFF,EAGEC,6BAHF,QAIO,oBAJP;AAMA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,GAAG,EAAG,+CACJC,OAAO,CAACC,GAAR,CAAYC,sBACb,eAAcP,iBAAiB,CAC9BQ,YAD8B,CAE9B,aAAYC,0BAA0B,CAAC,IAAIC,IAAJ,EAAD,CAAa,EALjC;AAMpBC,EAAAA,MAAM,EAAE;AANY,CAAtB;;AASA,MAAMC,wBAAwB,GAAG,CAACC,SAAD,EAAYC,SAAZ,EAAuBC,SAAvB,KAAqC;AAAA;;AACpE,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBnB,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACoB,KAAD,EAAQC,QAAR,IAAoBrB,QAAQ,CAAC,IAAD,CAAlC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,OAAO,CAAC,EAAD,CAAP;AACD,GAFQ,EAEN,CAACJ,SAAD,CAFM,CAAT;AAIA,MAAIO,OAAO,GAAGnB,aAAa,CAACY,SAAD,EAAYE,SAAZ,CAA3B;AACA,MAAIM,UAAU,GAAG,IAAIX,IAAJ,EAAjB;;AACA,MAAIR,6BAA6B,CAACkB,OAAD,EAAUC,UAAV,CAAjC,EAAwD;AACtDD,IAAAA,OAAO,GAAGC,UAAV;AACD;;AACDD,EAAAA,OAAO,GAAGpB,iBAAiB,CAACoB,OAAD,CAA3B;AAEAvB,EAAAA,SAAS,CAAC,MAAM;AACdE,IAAAA,KAAK,CAAC;AACJY,MAAAA,MADI;AAEJP,MAAAA,GAFI;AAGJY,MAAAA,IAHI;AAIJM,MAAAA;AAJI,KAAD,CAAL,CAMGC,IANH,CAMSC,QAAD,IAAc;AAClB,UAAIA,QAAQ,CAACR,IAAT,IAAiBS,KAAK,CAACC,OAAN,CAAcF,QAAQ,CAACR,IAAvB,CAArB,EAAmD;AACjDC,QAAAA,OAAO,CAACD,IAAI,CAACW,MAAL,CAAYH,QAAQ,CAACR,IAArB,CAAD,CAAP;AACD,OAFD,MAEO,IAAIQ,QAAQ,CAACR,IAAb,EAAmB;AACxBC,QAAAA,OAAO,CAACD,IAAI,CAACW,MAAL,CAAY,CAACH,QAAQ,CAACR,IAAV,CAAZ,CAAD,CAAP;AACD;AACF,KAZH,EAaGY,KAbH,CAaUV,KAAD,IAAW;AAChBC,MAAAA,QAAQ,CAACD,KAAD,CAAR;AACD,KAfH;AAgBD,GAjBQ,CAAT;AAmBA,SAAO,CAACF,IAAD,EAAOE,KAAP,CAAP;AACD,CAnCD;;GAAMN,wB;;AAqCN,eAAeA,wBAAf","sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport {\n  nasaAPIDateFormat,\n  addDaysToDate,\n  checkDateIsAfterThresholdDate,\n} from \"../utils/dateUtils\";\n\nconst requestParams = {\n  url: `https://api.nasa.gov/planetary/apod?api_key=${\n    process.env.REACT_APP_NASA_API_KEY\n  }&start_date=${nasaAPIDateFormat(\n    selectedDate\n  )}&end_date=${dateFonasaAPIDateFormatmat(new Date())}`,\n  method: \"GET\",\n};\n\nconst useBatchedNasaImageQuery = (startDate, currBatch, batchSize) => {\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setData([]);\n  }, [startDate]);\n\n  let endDate = addDaysToDate(startDate, batchSize);\n  let todaysDate = new Date();\n  if (checkDateIsAfterThresholdDate(endDate, todaysDate)) {\n    endDate = todaysDate;\n  }\n  endDate = nasaAPIDateFormat(endDate);\n\n  useEffect(() => {\n    axios({\n      method,\n      url,\n      data,\n      headers,\n    })\n      .then((response) => {\n        if (response.data && Array.isArray(response.data)) {\n          setData(data.concat(response.data));\n        } else if (response.data) {\n          setData(data.concat([response.data]));\n        }\n      })\n      .catch((error) => {\n        setError(error);\n      });\n  });\n\n  return [data, error];\n};\n\nexport default useBatchedNasaImageQuery;\n"]},"metadata":{},"sourceType":"module"}